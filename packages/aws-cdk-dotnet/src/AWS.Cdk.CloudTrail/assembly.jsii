{
  "schema": "jsii/1.0",
  "types": {
    "jsii$_aws_cdk_cloudtrail$.CloudTrailProps": {
      "kind": "interface",
      "properties": [
        {
          "docs": {
            "default": "true",
            "comment": "For most services, events are recorded in the region where the action occurred.\nFor global services such as AWS Identity and Access Management (IAM), AWS STS, Amazon CloudFront, and Route 53,\nevents are delivered to any trail that includes global services, and are logged as occurring in US East (N. Virginia) Region."
          },
          "name": "includeGlobalServiceEvents",
          "type": {
            "primitive": "boolean",
            "optional": true
          }
        },
        {
          "docs": {
            "default": "true",
            "comment": "Whether or not this trail delivers log files from multiple regions to a single S3 bucket for a single account."
          },
          "name": "isMultiRegionTrail",
          "type": {
            "primitive": "boolean",
            "optional": true
          }
        },
        {
          "docs": {
            "param": "managementEvents the management configuration type to log",
            "comment": "When an event occurs in your account, CloudTrail evaluates whether the event matches the settings for your trails.\nOnly events that match your trail settings are delivered to your Amazon S3 bucket and Amazon CloudWatch Logs log group.\n\nThis method sets the management configuration for this trail.\n\nManagement events provide insight into management operations that are performed on resources in your AWS account.\nThese are also known as control plane operations.\nManagement events can also include non-API events that occur in your account.\nFor example, when a user logs in to your account, CloudTrail logs the ConsoleLogin event.\n\nIf managementEvents is undefined, we'll not log management events by default."
          },
          "name": "managementEvents",
          "type": {
            "primitive": "string",
            "optional": true
          }
        },
        {
          "docs": {
            "default": "true",
            "comment": "To determine whether a log file was modified, deleted, or unchanged after CloudTrail delivered it,\nyou can use CloudTrail log file integrity validation.\nThis feature is built using industry standard algorithms: SHA-256 for hashing and SHA-256 with RSA for digital signing.\nThis makes it computationally infeasible to modify, delete or forge CloudTrail log files without detection.\nYou can use the AWS CLI to validate the files in the location where CloudTrail delivered them."
          },
          "name": "enableFileValidation",
          "type": {
            "primitive": "boolean",
            "optional": true
          }
        },
        {
          "docs": {
            "default": "false",
            "comment": "If CloudTrail pushes logs to CloudWatch Logs in addition to S3.\nDisabled for cost out of the box."
          },
          "name": "sendToCloudWatchLogs",
          "type": {
            "primitive": "boolean",
            "optional": true
          }
        },
        {
          "docs": {
            "default": "LogRetention.OneYear",
            "comment": "How long to retain logs in CloudWatchLogs. Ignored if sendToCloudWatchLogs is false\n  "
          },
          "name": "cloudWatchLogsRetentionTimeDays",
          "type": {
            "primitive": "number",
            "optional": true
          }
        },
        {
          "docs": {
            "default": "none",
            "comment": "The AWS Key Management Service (AWS KMS) key ID that you want to use to encrypt CloudTrail logs."
          },
          "name": "kmsKey",
          "type": {
            "fqn": "jsii$_aws_cdk_kms$.EncryptionKeyRef",
            "optional": true
          }
        },
        {
          "docs": {
            "default": "none",
            "comment": "The name of an Amazon SNS topic that is notified when new log files are published."
          },
          "name": "snsTopic",
          "type": {
            "primitive": "string",
            "optional": true
          }
        },
        {
          "docs": {
            "default": "the CloudFormation generated neme",
            "comment": "The name of the trail. We recoomend customers do not set an explicit name."
          },
          "name": "trailName",
          "type": {
            "primitive": "string",
            "optional": true
          }
        },
        {
          "docs": {
            "default": "none",
            "comment": "An Amazon S3 object key prefix that precedes the name of all log files."
          },
          "name": "s3KeyPrefix",
          "type": {
            "primitive": "string",
            "optional": true
          }
        }
      ],
      "fqn": "jsii$_aws_cdk_cloudtrail$.CloudTrailProps",
      "module": "jsii$_aws_cdk_cloudtrail$",
      "namespace": "jsii$_aws_cdk_cloudtrail$",
      "name": "CloudTrailProps",
      "datatype": true
    },
    "jsii$_aws_cdk_cloudtrail$.ReadWriteType": {
      "kind": "enum",
      "members": [
        {
          "name": "ReadOnly"
        },
        {
          "name": "WriteOnly"
        },
        {
          "name": "All"
        }
      ],
      "fqn": "jsii$_aws_cdk_cloudtrail$.ReadWriteType",
      "module": "jsii$_aws_cdk_cloudtrail$",
      "namespace": "jsii$_aws_cdk_cloudtrail$",
      "name": "ReadWriteType"
    },
    "jsii$_aws_cdk_cloudtrail$.LogRetention": {
      "kind": "enum",
      "members": [
        {
          "name": "OneDay"
        },
        {
          "name": "ThreeDays"
        },
        {
          "name": "FiveDays"
        },
        {
          "name": "OneWeek"
        },
        {
          "name": "TwoWeeks"
        },
        {
          "name": "OneMonth"
        },
        {
          "name": "TwoMonths"
        },
        {
          "name": "ThreeMonths"
        },
        {
          "name": "FourMonths"
        },
        {
          "name": "FiveMonths"
        },
        {
          "name": "HalfYear"
        },
        {
          "name": "OneYear"
        },
        {
          "name": "FourHundredDays"
        },
        {
          "name": "EighteenMonths"
        },
        {
          "name": "TwoYears"
        },
        {
          "name": "FiveYears"
        },
        {
          "name": "TenYears"
        }
      ],
      "fqn": "jsii$_aws_cdk_cloudtrail$.LogRetention",
      "module": "jsii$_aws_cdk_cloudtrail$",
      "namespace": "jsii$_aws_cdk_cloudtrail$",
      "name": "LogRetention"
    },
    "jsii$_aws_cdk_cloudtrail$.CloudTrail": {
      "docs": {
        "comment": "Cloud trail allows you to log events that happen in your AWS account\nFor example:\n\nimport { CloudTrail } from '@aws-cdk/ec2'\n\nconst cloudTrail = new CloudTrail(this, 'MyTrail');"
      },
      "kind": "class",
      "properties": [
        {
          "name": "cloudTrailArn",
          "type": {
            "fqn": "jsii$_aws_cdk_resources$.cloudtrail.TrailArn"
          },
          "immutable": true
        }
      ],
      "methods": [
        {
          "parameters": [
            {
              "name": "prefixes",
              "type": {
                "collection": {
                  "elementtype": {
                    "primitive": "string"
                  },
                  "kind": "array"
                }
              }
            },
            {
              "docs": {
                "param": "readWriteType the configuration type to log for this data event\nEg, ReadWriteType.ReadOnly will only log \"read\" events for S3 objects that match a filter)",
                "comment": "the configuration type to log for this data event\nEg, ReadWriteType.ReadOnly will only log \"read\" events for S3 objects that match a filter)"
              },
              "name": "readWriteType",
              "type": {
                "fqn": "jsii$_aws_cdk_cloudtrail$.ReadWriteType"
              }
            }
          ],
          "docs": {
            "comment": "When an event occurs in your account, CloudTrail evaluates whether the event matches the settings for your trails.\nOnly events that match your trail settings are delivered to your Amazon S3 bucket and Amazon CloudWatch Logs log group.\n\nThis method adds an S3 Data Event Selector for filtering events that match S3 operations.\n\nData events: These events provide insight into the resource operations performed on or within a resource.\nThese are also known as data plane operations."
          },
          "name": "addS3EventSelector"
        }
      ],
      "fqn": "jsii$_aws_cdk_cloudtrail$.CloudTrail",
      "module": "jsii$_aws_cdk_cloudtrail$",
      "namespace": "jsii$_aws_cdk_cloudtrail$",
      "name": "CloudTrail",
      "base": {
        "fqn": "jsii$_aws_cdk_core$.Construct"
      },
      "initializer": {
        "parameters": [
          {
            "name": "parent",
            "type": {
              "fqn": "jsii$_aws_cdk_core$.Construct"
            }
          },
          {
            "name": "name",
            "type": {
              "primitive": "string"
            }
          },
          {
            "name": "props",
            "type": {
              "fqn": "jsii$_aws_cdk_cloudtrail$.CloudTrailProps",
              "optional": true
            }
          }
        ],
        "initializer": true
      }
    }
  },
  "nametree": {
    "jsii$_aws_cdk_cloudtrail$": {
      "CloudTrailProps": {
        "_": "jsii$_aws_cdk_cloudtrail$.CloudTrailProps"
      },
      "ReadWriteType": {
        "_": "jsii$_aws_cdk_cloudtrail$.ReadWriteType"
      },
      "LogRetention": {
        "_": "jsii$_aws_cdk_cloudtrail$.LogRetention"
      },
      "CloudTrail": {
        "_": "jsii$_aws_cdk_cloudtrail$.CloudTrail"
      }
    }
  },
  "typecount": 4,
  "externalTypes": {
    "jsii$_aws_cdk_kms$.EncryptionKeyRef": {
      "kind": "class",
      "properties": [
        {
          "docs": {
            "comment": "The ARN of the key."
          },
          "name": "keyArn",
          "type": {
            "fqn": "jsii$_aws_cdk_resources$.kms.KeyArn"
          },
          "immutable": true,
          "abstract": true
        },
        {
          "docs": {
            "comment": "Optional policy document that represents the resource policy of this key.\n\nIf specified, addToResourcePolicy can be used to edit this policy.\nOtherwise this method will no-op."
          },
          "name": "policy",
          "type": {
            "fqn": "jsii$_aws_cdk_core$.PolicyDocument",
            "optional": true
          },
          "immutable": true,
          "protected": true,
          "abstract": true
        }
      ],
      "methods": [
        {
          "parameters": [
            {
              "docs": {
                "param": "parent The parent construct.",
                "comment": "The parent construct."
              },
              "name": "parent",
              "type": {
                "fqn": "jsii$_aws_cdk_core$.Construct"
              }
            },
            {
              "docs": {
                "param": "name The name of the construct.",
                "comment": "The name of the construct."
              },
              "name": "name",
              "type": {
                "primitive": "string"
              }
            },
            {
              "docs": {
                "param": "props The key reference.",
                "comment": "The key reference."
              },
              "name": "props",
              "type": {
                "fqn": "jsii$_aws_cdk_kms$.EncryptionKeyRefProps"
              }
            }
          ],
          "docs": {
            "comment": "Defines an imported encryption key.\n\n`ref` can be obtained either via a call to `key.export()` or using\nliterals.\n\nFor example:\n\n     const keyRefProps = key.export();\n     const keyRef1 = EncryptionKeyRef.import(this, 'MyImportedKey1', keyRefProps);\n     const keyRef2 = EncryptionKeyRef.import(this, 'MyImportedKey2', {\n         keyArn: new KeyArn('arn:aws:kms:...')\n     });"
          },
          "name": "import",
          "static": true,
          "returns": {
            "fqn": "jsii$_aws_cdk_kms$.EncryptionKeyRef"
          }
        },
        {
          "parameters": [
            {
              "name": "alias",
              "type": {
                "primitive": "string"
              }
            }
          ],
          "docs": {
            "comment": "Defines a new alias for the key."
          },
          "name": "addAlias",
          "returns": {
            "fqn": "jsii$_aws_cdk_kms$.EncryptionKeyAlias"
          }
        },
        {
          "parameters": [
            {
              "name": "statement",
              "type": {
                "fqn": "jsii$_aws_cdk_core$.PolicyStatement"
              }
            }
          ],
          "docs": {
            "comment": "Adds a statement to the KMS key resource policy."
          },
          "name": "addToResourcePolicy"
        },
        {
          "docs": {
            "returns": "a key ref which can be used in a call to `EncryptionKey.import(ref)`.",
            "comment": "Exports this key from the current stack."
          },
          "name": "export",
          "returns": {
            "fqn": "jsii$_aws_cdk_kms$.EncryptionKeyRefProps"
          }
        }
      ],
      "fqn": "jsii$_aws_cdk_kms$.EncryptionKeyRef",
      "module": "jsii$_aws_cdk_kms$",
      "namespace": "jsii$_aws_cdk_kms$",
      "name": "EncryptionKeyRef",
      "base": {
        "fqn": "jsii$_aws_cdk_core$.Construct"
      },
      "abstract": true,
      "initializer": {
        "parameters": [
          {
            "docs": {
              "param": "parent The parent construct",
              "comment": "The parent construct"
            },
            "name": "parent",
            "type": {
              "fqn": "jsii$_aws_cdk_core$.Construct"
            }
          },
          {
            "name": "name",
            "type": {
              "primitive": "string"
            }
          }
        ],
        "docs": {
          "comment": "Creates a new construct node."
        },
        "initializer": true
      }
    },
    "jsii$_aws_cdk_core$.Construct": {
      "docs": {
        "comment": "Represents the building block of the construct graph.\nWhen a construct is created, it is always added as a child"
      },
      "kind": "class",
      "properties": [
        {
          "docs": {
            "comment": "Returns the parent of this node or undefined if this is a root node."
          },
          "name": "parent",
          "type": {
            "fqn": "jsii$_aws_cdk_core$.Construct",
            "optional": true
          },
          "immutable": true
        },
        {
          "docs": {
            "comment": "The name of this construct"
          },
          "name": "name",
          "type": {
            "primitive": "string"
          },
          "immutable": true
        },
        {
          "docs": {
            "comment": "All direct children of this construct."
          },
          "name": "children",
          "type": {
            "collection": {
              "elementtype": {
                "fqn": "jsii$_aws_cdk_core$.Construct"
              },
              "kind": "array"
            }
          },
          "immutable": true
        },
        {
          "docs": {
            "returns": "/-separated path of this Construct.",
            "comment": "Returns the path of all constructs from root to this construct, in string form."
          },
          "name": "path",
          "type": {
            "primitive": "string"
          },
          "immutable": true
        },
        {
          "docs": {
            "comment": "An array of metadata objects associated with this construct.\nThis can be used, for example, to implement support for deprecation notices, source mapping, etc."
          },
          "name": "metadata",
          "type": {
            "collection": {
              "elementtype": {
                "fqn": "jsii$_aws_cdk_core$.MetadataEntry"
              },
              "kind": "array"
            }
          },
          "immutable": true
        }
      ],
      "methods": [
        {
          "docs": {
            "comment": "Returns a string representation of this construct."
          },
          "name": "toString",
          "returns": {
            "primitive": "string"
          }
        },
        {
          "parameters": [
            {
              "name": "depth",
              "type": {
                "primitive": "number",
                "optional": true
              }
            }
          ],
          "docs": {
            "comment": "Returns a string with a tree representation of this construct and it's children."
          },
          "name": "toTreeString",
          "returns": {
            "primitive": "string"
          }
        },
        {
          "parameters": [
            {
              "name": "path",
              "type": {
                "primitive": "string"
              }
            }
          ],
          "docs": {
            "returns": "a child by path or undefined if not found.",
            "comment": "Return a descendant by path, or undefined"
          },
          "name": "tryFindChild",
          "returns": {
            "fqn": "jsii$_aws_cdk_core$.Construct",
            "optional": true
          }
        },
        {
          "parameters": [
            {
              "name": "path",
              "type": {
                "primitive": "string"
              }
            }
          ],
          "docs": {
            "returns": "Child with the given path.",
            "comment": "Return a descendant by path\n\nThrows an exception if the descendant is not found."
          },
          "name": "findChild",
          "returns": {
            "fqn": "jsii$_aws_cdk_core$.Construct"
          }
        },
        {
          "parameters": [
            {
              "docs": {
                "param": "key The context key",
                "comment": "The context key"
              },
              "name": "key",
              "type": {
                "primitive": "string"
              }
            },
            {
              "docs": {
                "param": "value The context value",
                "comment": "The context value"
              },
              "name": "value",
              "type": {
                "primitive": "any"
              }
            }
          ],
          "docs": {
            "comment": "This can be used to set contextual values.\nContext must be set before any children are added, since children may consult context info during construction.\nIf the key already exists, it will be overridden."
          },
          "name": "setContext"
        },
        {
          "parameters": [
            {
              "docs": {
                "param": "key The context key",
                "comment": "The context key"
              },
              "name": "key",
              "type": {
                "primitive": "string"
              }
            }
          ],
          "docs": {
            "returns": "The context value or undefined",
            "comment": "Retrieves a value from tree context.\n\nContext is usually initialized at the root, but can be overridden at any point in the tree."
          },
          "name": "getContext",
          "returns": {
            "primitive": "any"
          }
        },
        {
          "parameters": [
            {
              "name": "key",
              "type": {
                "primitive": "string"
              }
            }
          ],
          "docs": {
            "comment": "Retrieve a value from tree-global context\n\nIt is an error if the context object is not available."
          },
          "name": "requireContext",
          "returns": {
            "primitive": "any"
          }
        },
        {
          "parameters": [
            {
              "docs": {
                "param": "type a string denoting the type of metadata",
                "comment": "a string denoting the type of metadata"
              },
              "name": "type",
              "type": {
                "primitive": "string"
              }
            },
            {
              "docs": {
                "param": "data the value of the metadata (can be a Token). If null/undefined, metadata will not be added.",
                "comment": "the value of the metadata (can be a Token). If null/undefined, metadata will not be added."
              },
              "name": "data",
              "type": {
                "primitive": "any"
              }
            },
            {
              "docs": {
                "param": "from a function under which to restrict the metadata entry's stack trace (defaults to this.addMetadata)",
                "comment": "a function under which to restrict the metadata entry's stack trace (defaults to this.addMetadata)"
              },
              "name": "from",
              "type": {
                "primitive": "any",
                "optional": true
              }
            }
          ],
          "docs": {
            "comment": "Adds a metadata entry to this construct.\nEntries are arbitrary values and will also include a stack trace to allow tracing back to\nthe code location for when the entry was added. It can be used, for example, to include source\nmapping in CloudFormation templates to improve diagnostics."
          },
          "name": "addMetadata",
          "returns": {
            "fqn": "jsii$_aws_cdk_core$.Construct"
          }
        },
        {
          "parameters": [
            {
              "docs": {
                "param": "message The warning message.",
                "comment": "The warning message."
              },
              "name": "message",
              "type": {
                "primitive": "string"
              }
            }
          ],
          "docs": {
            "comment": "Adds a { warning: <message> } metadata entry to this construct."
          },
          "name": "addWarning",
          "returns": {
            "fqn": "jsii$_aws_cdk_core$.Construct"
          }
        },
        {
          "docs": {
            "returns": "An array of validation error messages, or an empty array if there the construct is valid.",
            "comment": "This method can be implemented by derived constructs in order to perform\nvalidation logic. It is called on all constructs before synthesis."
          },
          "name": "validate",
          "returns": {
            "collection": {
              "elementtype": {
                "primitive": "string"
              },
              "kind": "array"
            }
          }
        },
        {
          "docs": {
            "returns": "A list of validation errors. If the list is empty, all constructs are valid.",
            "comment": "Invokes 'validate' on all child constructs and then on this construct (depth-first)."
          },
          "name": "validateTree",
          "returns": {
            "collection": {
              "elementtype": {
                "fqn": "jsii$_aws_cdk_core$.ValidationError"
              },
              "kind": "array"
            }
          }
        },
        {
          "parameters": [
            {
              "name": "upTo",
              "type": {
                "fqn": "jsii$_aws_cdk_core$.Construct",
                "optional": true
              }
            }
          ],
          "docs": {
            "comment": "Return the ancestors (including self) of this Construct up until and excluding the indicated component"
          },
          "name": "ancestors",
          "protected": true,
          "returns": {
            "collection": {
              "elementtype": {
                "fqn": "jsii$_aws_cdk_core$.Construct"
              },
              "kind": "array"
            }
          }
        },
        {
          "parameters": [
            {
              "docs": {
                "param": "props The props bag.",
                "comment": "The props bag."
              },
              "name": "props",
              "type": {
                "primitive": "any"
              }
            },
            {
              "docs": {
                "param": "name The name of the required property.",
                "comment": "The name of the required property."
              },
              "name": "name",
              "type": {
                "primitive": "string"
              }
            }
          ],
          "docs": {
            "comment": "Throws if the `props` bag doesn't include the property `name`.\nIn the future we can add some type-checking here, maybe even auto-generate during compilation."
          },
          "name": "required",
          "protected": true,
          "returns": {
            "primitive": "any"
          }
        },
        {
          "parameters": [
            {
              "docs": {
                "param": "child The child construct",
                "comment": "The child construct"
              },
              "name": "child",
              "type": {
                "fqn": "jsii$_aws_cdk_core$.Construct"
              }
            },
            {
              "name": "childName",
              "type": {
                "primitive": "string"
              }
            }
          ],
          "docs": {
            "returns": "The resolved path part name of the child",
            "comment": "Adds a child construct to this node."
          },
          "name": "addChild",
          "protected": true
        },
        {
          "docs": {
            "comment": "Locks this construct from allowing more children to be added. After this\ncall, no more children can be added to this construct or to any children."
          },
          "name": "lock",
          "protected": true
        },
        {
          "docs": {
            "comment": "Unlocks this costruct and allows mutations (adding children)."
          },
          "name": "unlock",
          "protected": true
        }
      ],
      "fqn": "jsii$_aws_cdk_core$.Construct",
      "module": "jsii$_aws_cdk_core$",
      "namespace": "jsii$_aws_cdk_core$",
      "name": "Construct",
      "initializer": {
        "parameters": [
          {
            "docs": {
              "param": "parent The parent construct",
              "comment": "The parent construct"
            },
            "name": "parent",
            "type": {
              "fqn": "jsii$_aws_cdk_core$.Construct"
            }
          },
          {
            "name": "name",
            "type": {
              "primitive": "string"
            }
          }
        ],
        "docs": {
          "comment": "Creates a new construct node."
        },
        "initializer": true
      }
    },
    "jsii$_aws_cdk_resources$.cloudtrail.TrailArn": {
      "kind": "class",
      "fqn": "jsii$_aws_cdk_resources$.cloudtrail.TrailArn",
      "module": "jsii$_aws_cdk_resources$",
      "namespace": "jsii$_aws_cdk_resources$.cloudtrail",
      "name": "TrailArn",
      "base": {
        "fqn": "jsii$_aws_cdk_core$.Arn"
      },
      "initializer": {
        "parameters": [
          {
            "name": "valueOrFunction",
            "type": {
              "primitive": "any",
              "optional": true
            }
          }
        ],
        "docs": {
          "comment": "Creates a token that resolves to `value`. If value is a function,\nthe function is evaluated upon resolution and the value it returns will be\nuesd as the token's value."
        },
        "initializer": true
      }
    }
  },
  "name": "jsii$_aws_cdk_cloudtrail$",
  "package": "@aws-cdk/cloudtrail",
  "version": "0.7.2-beta",
  "dependencies": {
    "jsii$_aws_cdk_core$": {
      "package": "@aws-cdk/core",
      "version": "0.7.2-beta"
    },
    "jsii$_aws_cdk_iam$": {
      "package": "@aws-cdk/iam",
      "version": "0.7.2-beta"
    },
    "jsii$_aws_cdk_kms$": {
      "package": "@aws-cdk/kms",
      "version": "0.7.2-beta"
    },
    "jsii$_aws_cdk_resources$": {
      "package": "@aws-cdk/resources",
      "version": "0.7.2-beta"
    },
    "jsii$_aws_cdk_s3$": {
      "package": "@aws-cdk/s3",
      "version": "0.7.2-beta"
    }
  },
  "names": {
    "java": "com.amazonaws.cdk.cloudtrail",
    "dotnet": "AWS.Cdk.CloudTrail",
    "js": "@aws-cdk/cloudtrail"
  },
  "nativenames": {
    "jsii$_aws_cdk_core$": {
      "java": "com.amazonaws.cdk",
      "dotnet": "AWS.Cdk",
      "js": "@aws-cdk/core"
    },
    "jsii$_aws_cdk_iam$": {
      "java": "com.amazonaws.cdk.iam",
      "dotnet": "AWS.Cdk.Iam",
      "js": "@aws-cdk/iam"
    },
    "jsii$_aws_cdk_kms$": {
      "java": "com.amazonaws.cdk.kms",
      "dotnet": "AWS.Cdk.Kms",
      "js": "@aws-cdk/kms"
    },
    "jsii$_aws_cdk_resources$": {
      "java": "com.amazonaws.cdk.resources",
      "dotnet": "AWS.Cdk.Resources",
      "js": "@aws-cdk/resources"
    },
    "jsii$_aws_cdk_s3$": {
      "java": "com.amazonaws.cdk.s3",
      "dotnet": "AWS.Cdk.S3",
      "js": "@aws-cdk/s3"
    },
    "jsii$_aws_cdk_cloudtrail$": {
      "java": "com.amazonaws.cdk.cloudtrail",
      "dotnet": "AWS.Cdk.CloudTrail",
      "js": "@aws-cdk/cloudtrail"
    }
  },
  "readme": {
    "markdown": "## AWS CloudTrail Construct Library\nAdd a CloudTrail construct - for ease of setting up CloudTrail logging in your account\n\nExample usage:\n\n```ts\nimport { CloudTrail } from '@aws-cdk/cloudtrail';\n\nconst trail = new CloudTrail(stack, 'CloudTrail');\n```\n\nYou can instantiate the CloudTrail construct with no arguments - this will by default:\n    * Create a new S3 Bucket and associated Policy that allows CloudTrail to write to it\n    * Create a CloudTrail with the following configuration:\n        * Logging Enabled\n        * Log file validation enabled\n        * Multi Region set to true\n        * Global Service Events set to true\n        * The created S3 bucket\n        * CloudWatch Logging Disabled\n        * No SNS configuartion\n        * No tags\n        * No fixed name\n\nYou can override any of these properties using the `CloudTrailProps` configuraiton object.\n\nFor example, to log to CloudWatch Logs\n\n```ts\n\nimport { CloudTrail } from '@aws-cdk/cloudtrail';\n\nconst trail = new CloudTrail(stack, 'CloudTrail', {\n    sendToCloudWatchLogs: true\n});\n```\n\nThis creates the same setup as above - but also logs events to a created CloudWatch Log stream. By default, the created log group has a retention period of 365 Days, but this is also configurable.\n\n\nFor using CloudTrail event selector to log specific S3 events, you can use the `CloudTrailProps` configuration object\n\nFor example - this logs all ReadWriteEvents for the `magic-bucket` bucket:\n\n```ts\nimport { CloudTrail, DataResourceType, ReadWriteType  } from '@aws-cdk/cloudtrail';\n\nconst trail = new CloudTrail(stack, 'MyAmazingCloudTrail')\n\ntrail.addS3Filter(\"arn:aws:s3:::magic-bucket/\"); // Adds an event selector to the bucket magic-bucket. By default, this includes management events and all operations (Read + Write)\n\nconst configuration = {includeManagementEvents = false, readWriteType = ReadWriteType.All}\ntrail.addS3Filter([\"arn:aws:s3:::foo\"], configuration ); // Adds an event selector to the bucket foo, with a specific configuration\n});\n```\n"
  },
  "code": "var jsii$_aws_cdk_cloudtrail$ =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst core_1 = __webpack_require__(1);\nconst iam_1 = __webpack_require__(2);\nconst resources_1 = __webpack_require__(3);\nconst s3_1 = __webpack_require__(4);\nvar ReadWriteType;\n(function (ReadWriteType) {\n    ReadWriteType[\"ReadOnly\"] = \"ReadOnly\";\n    ReadWriteType[\"WriteOnly\"] = \"WriteOnly\";\n    ReadWriteType[\"All\"] = \"All\";\n})(ReadWriteType = exports.ReadWriteType || (exports.ReadWriteType = {}));\n// TODO: This belongs in a CWL L2\nvar LogRetention;\n(function (LogRetention) {\n    LogRetention[LogRetention[\"OneDay\"] = 1] = \"OneDay\";\n    LogRetention[LogRetention[\"ThreeDays\"] = 3] = \"ThreeDays\";\n    LogRetention[LogRetention[\"FiveDays\"] = 5] = \"FiveDays\";\n    LogRetention[LogRetention[\"OneWeek\"] = 7] = \"OneWeek\";\n    LogRetention[LogRetention[\"TwoWeeks\"] = 14] = \"TwoWeeks\";\n    LogRetention[LogRetention[\"OneMonth\"] = 30] = \"OneMonth\";\n    LogRetention[LogRetention[\"TwoMonths\"] = 60] = \"TwoMonths\";\n    LogRetention[LogRetention[\"ThreeMonths\"] = 90] = \"ThreeMonths\";\n    LogRetention[LogRetention[\"FourMonths\"] = 120] = \"FourMonths\";\n    LogRetention[LogRetention[\"FiveMonths\"] = 150] = \"FiveMonths\";\n    LogRetention[LogRetention[\"HalfYear\"] = 180] = \"HalfYear\";\n    LogRetention[LogRetention[\"OneYear\"] = 365] = \"OneYear\";\n    LogRetention[LogRetention[\"FourHundredDays\"] = 400] = \"FourHundredDays\";\n    LogRetention[LogRetention[\"EighteenMonths\"] = 545] = \"EighteenMonths\";\n    LogRetention[LogRetention[\"TwoYears\"] = 731] = \"TwoYears\";\n    LogRetention[LogRetention[\"FiveYears\"] = 1827] = \"FiveYears\";\n    LogRetention[LogRetention[\"TenYears\"] = 3653] = \"TenYears\";\n})(LogRetention = exports.LogRetention || (exports.LogRetention = {}));\n/**\n * Cloud trail allows you to log events that happen in your AWS account\n * For example:\n *\n * import { CloudTrail } from '@aws-cdk/ec2'\n *\n * const cloudTrail = new CloudTrail(this, 'MyTrail');\n *\n */\nclass CloudTrail extends core_1.Construct {\n    constructor(parent, name, props = {}) {\n        super(parent, name);\n        this.eventSelectors = [];\n        const s3bucket = new s3_1.Bucket(this, 'S3', { encryption: s3_1.BucketEncryption.Unencrypted });\n        const cloudTrailPrincipal = \"cloudtrail.amazonaws.com\";\n        s3bucket.addToResourcePolicy(new core_1.PolicyStatement()\n            .addResource(s3bucket.bucketArn)\n            .addActions('s3:GetBucketAcl')\n            .addServicePrincipal(cloudTrailPrincipal));\n        s3bucket.addToResourcePolicy(new core_1.PolicyStatement()\n            .addResource(s3bucket.arnForObjects(new core_1.FnConcat('/AWSLogs/', new core_1.AwsAccountId())))\n            .addActions(\"s3:PutObject\")\n            .addServicePrincipal(cloudTrailPrincipal)\n            .setCondition(\"StringEquals\", { 's3:x-amz-acl': \"bucket-owner-full-control\" }));\n        if (props.sendToCloudWatchLogs) {\n            const logGroup = new resources_1.logs.LogGroupResource(this, \"LogGroup\", {\n                retentionInDays: props.cloudWatchLogsRetentionTimeDays || LogRetention.OneYear\n            });\n            this.cloudWatchLogsGroupArn = logGroup.ref;\n            const logsRole = new iam_1.Role(this, 'LogsRole', { assumedBy: new core_1.ServicePrincipal(cloudTrailPrincipal) });\n            const streamArn = new core_1.FnConcat(this.cloudWatchLogsGroupArn, \":log-stream:*\");\n            logsRole.addToPolicy(new core_1.PolicyStatement()\n                .addActions(\"logs:PutLogEvents\", \"logs:CreateLogStream\")\n                .addResource(streamArn));\n            this.cloudWatchLogsRoleArn = logsRole.roleArn;\n        }\n        if (props.managementEvents) {\n            const managementEvent = {\n                includeManagementEvents: true,\n                readWriteType: props.managementEvents\n            };\n            this.eventSelectors.push(managementEvent);\n        }\n        // TODO: not all regions support validation. Use service configuration data to fail gracefully\n        const trail = new resources_1.cloudtrail.TrailResource(this, 'Resource', {\n            isLogging: true,\n            enableLogFileValidation: props.enableFileValidation == null ? true : props.enableFileValidation,\n            isMultiRegionTrail: props.isMultiRegionTrail == null ? true : props.isMultiRegionTrail,\n            includeGlobalServiceEvents: props.includeGlobalServiceEvents == null ? true : props.includeGlobalServiceEvents,\n            trailName: props.trailName,\n            kmsKeyId: props.kmsKey && props.kmsKey.keyArn,\n            s3BucketName: s3bucket.name,\n            s3KeyPrefix: props.s3KeyPrefix,\n            cloudWatchLogsLogGroupArn: this.cloudWatchLogsGroupArn,\n            cloudWatchLogsRoleArn: this.cloudWatchLogsRoleArn,\n            snsTopicName: props.snsTopic,\n            eventSelectors: this.eventSelectors\n        });\n        this.cloudTrailArn = trail.trailArn;\n    }\n    /**\n     * When an event occurs in your account, CloudTrail evaluates whether the event matches the settings for your trails.\n     * Only events that match your trail settings are delivered to your Amazon S3 bucket and Amazon CloudWatch Logs log group.\n     *\n     * This method adds an S3 Data Event Selector for filtering events that match S3 operations.\n     *\n     * Data events: These events provide insight into the resource operations performed on or within a resource.\n     * These are also known as data plane operations.\n     * @param readWriteType the configuration type to log for this data event\n     * Eg, ReadWriteType.ReadOnly will only log \"read\" events for S3 objects that match a filter)\n     */\n    addS3EventSelector(prefixes, readWriteType) {\n        if (prefixes.length > 250) {\n            throw new Error(\"A maximum of 250 data elements can be in one event selector\");\n        }\n        if (this.eventSelectors.length > 5) {\n            throw new Error(\"A maximum of 5 event selectors are supported per trail.\");\n        }\n        this.eventSelectors.push({\n            includeManagementEvents: false,\n            readWriteType,\n            dataResources: [{\n                    type: \"AWS::S3::Object\",\n                    values: prefixes\n                }]\n        });\n    }\n}\nexports.CloudTrail = CloudTrail;\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\nmodule.exports = jsii$_aws_cdk_core$;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\nmodule.exports = jsii$_aws_cdk_iam$;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\nmodule.exports = jsii$_aws_cdk_resources$;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\nmodule.exports = jsii$_aws_cdk_s3$;\n\n/***/ })\n/******/ ]);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgZWU2MzI5MjczYTM4YjdhMjkwZjAiLCJ3ZWJwYWNrOi8vLy9yb290L3JlcG9zL2F3cy1jZGsvcGFja2FnZXMvQGF3cy1jZGsvY2xvdWR0cmFpbC9saWIvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwianNpaSRfYXdzX2Nka19jb3JlJFwiIiwid2VicGFjazovLy9leHRlcm5hbCBcImpzaWkkX2F3c19jZGtfaWFtJFwiIiwid2VicGFjazovLy9leHRlcm5hbCBcImpzaWkkX2F3c19jZGtfcmVzb3VyY2VzJFwiIiwid2VicGFjazovLy9leHRlcm5hbCBcImpzaWkkX2F3c19jZGtfczMkXCIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUNBQTJCLDBCQUEwQixFQUFFO0FBQ3ZELHlDQUFpQyxlQUFlO0FBQ2hEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhEQUFzRCwrREFBK0Q7O0FBRXJIO0FBQ0E7O0FBRUE7QUFDQTs7Ozs7Ozs7OztBQzdEQSxzQ0FBNEc7QUFDNUcscUNBQW9DO0FBRXBDLDJDQUFzRDtBQUN0RCxvQ0FBdUQ7QUE4RXZELElBQVksYUFJWDtBQUpELFdBQVksYUFBYTtJQUNyQixzQ0FBcUI7SUFDckIsd0NBQXVCO0lBQ3ZCLDRCQUFXO0FBQ2YsQ0FBQyxFQUpXLGFBQWEsR0FBYixxQkFBYSxLQUFiLHFCQUFhLFFBSXhCO0FBRUQsaUNBQWlDO0FBQ2pDLElBQVksWUFrQlg7QUFsQkQsV0FBWSxZQUFZO0lBQ3BCLG1EQUFVO0lBQ1YseURBQWE7SUFDYix1REFBWTtJQUNaLHFEQUFXO0lBQ1gsd0RBQWM7SUFDZCx3REFBYTtJQUNiLDBEQUFjO0lBQ2QsOERBQWdCO0lBQ2hCLDZEQUFnQjtJQUNoQiw2REFBZ0I7SUFDaEIseURBQWM7SUFDZCx1REFBYTtJQUNiLHVFQUFxQjtJQUNyQixxRUFBb0I7SUFDcEIseURBQWM7SUFDZCw0REFBZ0I7SUFDaEIsMERBQWU7QUFDbkIsQ0FBQyxFQWxCVyxZQUFZLEdBQVosb0JBQVksS0FBWixvQkFBWSxRQWtCdkI7QUFDRDs7Ozs7Ozs7R0FRRztBQUNILGdCQUF3QixTQUFRLGdCQUFTO0lBT3JDLFlBQVksTUFBaUIsRUFBRSxJQUFZLEVBQUUsUUFBeUIsRUFBRTtRQUNwRSxLQUFLLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBSGhCLG1CQUFjLEdBQW9CLEVBQUUsQ0FBQztRQUt6QyxNQUFNLFFBQVEsR0FBRyxJQUFJLFdBQU0sQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUMsVUFBVSxFQUFFLHFCQUFnQixDQUFDLFdBQVcsRUFBQyxDQUFDLENBQUM7UUFDcEYsTUFBTSxtQkFBbUIsR0FBRywwQkFBMEIsQ0FBQztRQUV2RCxRQUFRLENBQUMsbUJBQW1CLENBQUMsSUFBSSxzQkFBZSxFQUFFO2FBQzdDLFdBQVcsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDO2FBQy9CLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQzthQUM3QixtQkFBbUIsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUM7UUFFL0MsUUFBUSxDQUFDLG1CQUFtQixDQUFDLElBQUksc0JBQWUsRUFBRTthQUM3QyxXQUFXLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxJQUFJLGVBQVEsQ0FBQyxXQUFXLEVBQUUsSUFBSSxtQkFBWSxFQUFFLENBQUMsQ0FBQyxDQUFDO2FBQ2xGLFVBQVUsQ0FBQyxjQUFjLENBQUM7YUFDMUIsbUJBQW1CLENBQUMsbUJBQW1CLENBQUM7YUFDeEMsWUFBWSxDQUFDLGNBQWMsRUFBRSxFQUFDLGNBQWMsRUFBRSwyQkFBMkIsRUFBQyxDQUFDLENBQUMsQ0FBQztRQUVsRixJQUFJLEtBQUssQ0FBQyxvQkFBb0IsRUFBRTtZQUM1QixNQUFNLFFBQVEsR0FBRyxJQUFJLGdCQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxFQUFFLFVBQVUsRUFBRTtnQkFDekQsZUFBZSxFQUFFLEtBQUssQ0FBQywrQkFBK0IsSUFBSSxZQUFZLENBQUMsT0FBTzthQUNqRixDQUFDLENBQUM7WUFDSCxJQUFJLENBQUMsc0JBQXNCLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQztZQUUzQyxNQUFNLFFBQVEsR0FBRyxJQUFJLFVBQUksQ0FBQyxJQUFJLEVBQUUsVUFBVSxFQUFFLEVBQUMsU0FBUyxFQUFFLElBQUksdUJBQWdCLENBQUMsbUJBQW1CLENBQUMsRUFBRSxDQUFDLENBQUM7WUFFckcsTUFBTSxTQUFTLEdBQUcsSUFBSSxlQUFRLENBQUMsSUFBSSxDQUFDLHNCQUFzQixFQUFFLGVBQWUsQ0FBQyxDQUFDO1lBQzdFLFFBQVEsQ0FBQyxXQUFXLENBQUMsSUFBSSxzQkFBZSxFQUFFO2lCQUNyQyxVQUFVLENBQUMsbUJBQW1CLEVBQUUsc0JBQXNCLENBQUM7aUJBQ3ZELFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1lBQzdCLElBQUksQ0FBQyxxQkFBcUIsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDO1NBRWpEO1FBQ0QsSUFBSSxLQUFLLENBQUMsZ0JBQWdCLEVBQUU7WUFDeEIsTUFBTSxlQUFlLEdBQUk7Z0JBQ3JCLHVCQUF1QixFQUFFLElBQUk7Z0JBQzdCLGFBQWEsRUFBRSxLQUFLLENBQUMsZ0JBQWdCO2FBQ3hDLENBQUM7WUFDRixJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztTQUM3QztRQUVELDhGQUE4RjtRQUM5RixNQUFNLEtBQUssR0FBRyxJQUFJLHNCQUFVLENBQUMsYUFBYSxDQUFDLElBQUksRUFBRSxVQUFVLEVBQUU7WUFDekQsU0FBUyxFQUFFLElBQUk7WUFDZix1QkFBdUIsRUFBRSxLQUFLLENBQUMsb0JBQW9CLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxvQkFBb0I7WUFDL0Ysa0JBQWtCLEVBQUUsS0FBSyxDQUFDLGtCQUFrQixJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsa0JBQWtCO1lBQ3RGLDBCQUEwQixFQUFFLEtBQUssQ0FBQywwQkFBMEIsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLDBCQUEwQjtZQUM5RyxTQUFTLEVBQUUsS0FBSyxDQUFDLFNBQVM7WUFDMUIsUUFBUSxFQUFHLEtBQUssQ0FBQyxNQUFNLElBQUksS0FBSyxDQUFDLE1BQU0sQ0FBQyxNQUFNO1lBQzlDLFlBQVksRUFBRSxRQUFRLENBQUMsSUFBSTtZQUMzQixXQUFXLEVBQUUsS0FBSyxDQUFDLFdBQVc7WUFDOUIseUJBQXlCLEVBQUUsSUFBSSxDQUFDLHNCQUFzQjtZQUN0RCxxQkFBcUIsRUFBRSxJQUFJLENBQUMscUJBQXFCO1lBQ2pELFlBQVksRUFBRSxLQUFLLENBQUMsUUFBUTtZQUM1QixjQUFjLEVBQUUsSUFBSSxDQUFDLGNBQWM7U0FDdEMsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDO0lBQ3hDLENBQUM7SUFFRDs7Ozs7Ozs7OztPQVVHO0lBQ0ksa0JBQWtCLENBQUMsUUFBa0IsRUFBRSxhQUE0QjtRQUN0RSxJQUFJLFFBQVEsQ0FBQyxNQUFNLEdBQUcsR0FBRyxFQUFFO1lBQ3ZCLE1BQU0sSUFBSSxLQUFLLENBQUMsNkRBQTZELENBQUMsQ0FBQztTQUNsRjtRQUNELElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQ2hDLE1BQU0sSUFBSSxLQUFLLENBQUMseURBQXlELENBQUMsQ0FBQztTQUM5RTtRQUNELElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDO1lBQ3JCLHVCQUF1QixFQUFFLEtBQUs7WUFDOUIsYUFBYTtZQUNiLGFBQWEsRUFBRSxDQUFDO29CQUNaLElBQUksRUFBRSxpQkFBaUI7b0JBQ3ZCLE1BQU0sRUFBRSxRQUFRO2lCQUNuQixDQUFDO1NBQ0wsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztDQUNKO0FBNUZELGdDQTRGQzs7Ozs7OztBQ2pORCxxQzs7Ozs7O0FDQUEsb0M7Ozs7OztBQ0FBLDBDOzs7Ozs7QUNBQSxtQyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCBlZTYzMjkyNzNhMzhiN2EyOTBmMCIsImltcG9ydCB7IEF3c0FjY291bnRJZCwgQ29uc3RydWN0LCBGbkNvbmNhdCwgUG9saWN5U3RhdGVtZW50LCBTZXJ2aWNlUHJpbmNpcGFsLCBUb2tlbiB9IGZyb20gJ0Bhd3MtY2RrL2NvcmUnO1xuaW1wb3J0IHsgUm9sZSB9IGZyb20gJ0Bhd3MtY2RrL2lhbSc7XG5pbXBvcnQgeyBFbmNyeXB0aW9uS2V5UmVmIH0gZnJvbSAnQGF3cy1jZGsva21zJztcbmltcG9ydCB7IGNsb3VkdHJhaWwsIGxvZ3MgfSBmcm9tICdAYXdzLWNkay9yZXNvdXJjZXMnO1xuaW1wb3J0IHsgQnVja2V0LCBCdWNrZXRFbmNyeXB0aW9uIH0gZnJvbSAnQGF3cy1jZGsvczMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIENsb3VkVHJhaWxQcm9wcyB7XG4gICAgLyoqXG4gICAgICogRm9yIG1vc3Qgc2VydmljZXMsIGV2ZW50cyBhcmUgcmVjb3JkZWQgaW4gdGhlIHJlZ2lvbiB3aGVyZSB0aGUgYWN0aW9uIG9jY3VycmVkLlxuICAgICAqIEZvciBnbG9iYWwgc2VydmljZXMgc3VjaCBhcyBBV1MgSWRlbnRpdHkgYW5kIEFjY2VzcyBNYW5hZ2VtZW50IChJQU0pLCBBV1MgU1RTLCBBbWF6b24gQ2xvdWRGcm9udCwgYW5kIFJvdXRlIDUzLFxuICAgICAqIGV2ZW50cyBhcmUgZGVsaXZlcmVkIHRvIGFueSB0cmFpbCB0aGF0IGluY2x1ZGVzIGdsb2JhbCBzZXJ2aWNlcywgYW5kIGFyZSBsb2dnZWQgYXMgb2NjdXJyaW5nIGluIFVTIEVhc3QgKE4uIFZpcmdpbmlhKSBSZWdpb24uXG4gICAgICogQGRlZmF1bHQgdHJ1ZVxuICAgICAqL1xuICAgIGluY2x1ZGVHbG9iYWxTZXJ2aWNlRXZlbnRzPzogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgb3Igbm90IHRoaXMgdHJhaWwgZGVsaXZlcnMgbG9nIGZpbGVzIGZyb20gbXVsdGlwbGUgcmVnaW9ucyB0byBhIHNpbmdsZSBTMyBidWNrZXQgZm9yIGEgc2luZ2xlIGFjY291bnQuXG4gICAgICogQGRlZmF1bHQgdHJ1ZVxuICAgICAqL1xuICAgIGlzTXVsdGlSZWdpb25UcmFpbD86IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBXaGVuIGFuIGV2ZW50IG9jY3VycyBpbiB5b3VyIGFjY291bnQsIENsb3VkVHJhaWwgZXZhbHVhdGVzIHdoZXRoZXIgdGhlIGV2ZW50IG1hdGNoZXMgdGhlIHNldHRpbmdzIGZvciB5b3VyIHRyYWlscy5cbiAgICAgKiBPbmx5IGV2ZW50cyB0aGF0IG1hdGNoIHlvdXIgdHJhaWwgc2V0dGluZ3MgYXJlIGRlbGl2ZXJlZCB0byB5b3VyIEFtYXpvbiBTMyBidWNrZXQgYW5kIEFtYXpvbiBDbG91ZFdhdGNoIExvZ3MgbG9nIGdyb3VwLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2Qgc2V0cyB0aGUgbWFuYWdlbWVudCBjb25maWd1cmF0aW9uIGZvciB0aGlzIHRyYWlsLlxuICAgICAqXG4gICAgICogTWFuYWdlbWVudCBldmVudHMgcHJvdmlkZSBpbnNpZ2h0IGludG8gbWFuYWdlbWVudCBvcGVyYXRpb25zIHRoYXQgYXJlIHBlcmZvcm1lZCBvbiByZXNvdXJjZXMgaW4geW91ciBBV1MgYWNjb3VudC5cbiAgICAgKiBUaGVzZSBhcmUgYWxzbyBrbm93biBhcyBjb250cm9sIHBsYW5lIG9wZXJhdGlvbnMuXG4gICAgICogTWFuYWdlbWVudCBldmVudHMgY2FuIGFsc28gaW5jbHVkZSBub24tQVBJIGV2ZW50cyB0aGF0IG9jY3VyIGluIHlvdXIgYWNjb3VudC5cbiAgICAgKiBGb3IgZXhhbXBsZSwgd2hlbiBhIHVzZXIgbG9ncyBpbiB0byB5b3VyIGFjY291bnQsIENsb3VkVHJhaWwgbG9ncyB0aGUgQ29uc29sZUxvZ2luIGV2ZW50LlxuICAgICAqXG4gICAgICogSWYgbWFuYWdlbWVudEV2ZW50cyBpcyB1bmRlZmluZWQsIHdlJ2xsIG5vdCBsb2cgbWFuYWdlbWVudCBldmVudHMgYnkgZGVmYXVsdC5cbiAgICAgKiBAcGFyYW0gbWFuYWdlbWVudEV2ZW50cyB0aGUgbWFuYWdlbWVudCBjb25maWd1cmF0aW9uIHR5cGUgdG8gbG9nXG4gICAgICovXG4gICAgbWFuYWdlbWVudEV2ZW50cz86IFJlYWRXcml0ZVR5cGU7XG5cbiAgICAvKipcbiAgICAgKiBUbyBkZXRlcm1pbmUgd2hldGhlciBhIGxvZyBmaWxlIHdhcyBtb2RpZmllZCwgZGVsZXRlZCwgb3IgdW5jaGFuZ2VkIGFmdGVyIENsb3VkVHJhaWwgZGVsaXZlcmVkIGl0LFxuICAgICAqIHlvdSBjYW4gdXNlIENsb3VkVHJhaWwgbG9nIGZpbGUgaW50ZWdyaXR5IHZhbGlkYXRpb24uXG4gICAgICogVGhpcyBmZWF0dXJlIGlzIGJ1aWx0IHVzaW5nIGluZHVzdHJ5IHN0YW5kYXJkIGFsZ29yaXRobXM6IFNIQS0yNTYgZm9yIGhhc2hpbmcgYW5kIFNIQS0yNTYgd2l0aCBSU0EgZm9yIGRpZ2l0YWwgc2lnbmluZy5cbiAgICAgKiBUaGlzIG1ha2VzIGl0IGNvbXB1dGF0aW9uYWxseSBpbmZlYXNpYmxlIHRvIG1vZGlmeSwgZGVsZXRlIG9yIGZvcmdlIENsb3VkVHJhaWwgbG9nIGZpbGVzIHdpdGhvdXQgZGV0ZWN0aW9uLlxuICAgICAqIFlvdSBjYW4gdXNlIHRoZSBBV1MgQ0xJIHRvIHZhbGlkYXRlIHRoZSBmaWxlcyBpbiB0aGUgbG9jYXRpb24gd2hlcmUgQ2xvdWRUcmFpbCBkZWxpdmVyZWQgdGhlbS5cbiAgICAgKiBAZGVmYXVsdCB0cnVlXG4gICAgICovXG4gICAgZW5hYmxlRmlsZVZhbGlkYXRpb24/OiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogSWYgQ2xvdWRUcmFpbCBwdXNoZXMgbG9ncyB0byBDbG91ZFdhdGNoIExvZ3MgaW4gYWRkaXRpb24gdG8gUzMuXG4gICAgICogRGlzYWJsZWQgZm9yIGNvc3Qgb3V0IG9mIHRoZSBib3guXG4gICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgKi9cbiAgICBzZW5kVG9DbG91ZFdhdGNoTG9ncz86IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBIb3cgbG9uZyB0byByZXRhaW4gbG9ncyBpbiBDbG91ZFdhdGNoTG9ncy4gSWdub3JlZCBpZiBzZW5kVG9DbG91ZFdhdGNoTG9ncyBpcyBmYWxzZVxuICAgICAqICBAZGVmYXVsdCBMb2dSZXRlbnRpb24uT25lWWVhclxuICAgICAqL1xuICAgIGNsb3VkV2F0Y2hMb2dzUmV0ZW50aW9uVGltZURheXM/OiBMb2dSZXRlbnRpb247XG5cbiAgICAvKiogVGhlIEFXUyBLZXkgTWFuYWdlbWVudCBTZXJ2aWNlIChBV1MgS01TKSBrZXkgSUQgdGhhdCB5b3Ugd2FudCB0byB1c2UgdG8gZW5jcnlwdCBDbG91ZFRyYWlsIGxvZ3MuXG4gICAgICogQGRlZmF1bHQgbm9uZVxuICAgICAqL1xuICAgIGttc0tleT86IEVuY3J5cHRpb25LZXlSZWY7XG5cbiAgICAvKiogVGhlIG5hbWUgb2YgYW4gQW1hem9uIFNOUyB0b3BpYyB0aGF0IGlzIG5vdGlmaWVkIHdoZW4gbmV3IGxvZyBmaWxlcyBhcmUgcHVibGlzaGVkLlxuICAgICAqIEBkZWZhdWx0IG5vbmVcbiAgICAgKi9cbiAgICBzbnNUb3BpYz86IHN0cmluZzsgLy8gVE9ETzogZml4IHRvIHVzZSBMMiBTTlNcblxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSB0cmFpbC4gV2UgcmVjb29tZW5kIGN1c3RvbWVycyBkbyBub3Qgc2V0IGFuIGV4cGxpY2l0IG5hbWUuXG4gICAgICogQGRlZmF1bHQgdGhlIENsb3VkRm9ybWF0aW9uIGdlbmVyYXRlZCBuZW1lXG4gICAgICovXG4gICAgdHJhaWxOYW1lPzogc3RyaW5nO1xuXG4gICAgLyoqIEFuIEFtYXpvbiBTMyBvYmplY3Qga2V5IHByZWZpeCB0aGF0IHByZWNlZGVzIHRoZSBuYW1lIG9mIGFsbCBsb2cgZmlsZXMuXG4gICAgICogQGRlZmF1bHQgbm9uZVxuICAgICAqL1xuICAgIHMzS2V5UHJlZml4Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgZW51bSBSZWFkV3JpdGVUeXBlIHtcbiAgICBSZWFkT25seSA9IFwiUmVhZE9ubHlcIixcbiAgICBXcml0ZU9ubHkgPSBcIldyaXRlT25seVwiLFxuICAgIEFsbCA9IFwiQWxsXCJcbn1cblxuLy8gVE9ETzogVGhpcyBiZWxvbmdzIGluIGEgQ1dMIEwyXG5leHBvcnQgZW51bSBMb2dSZXRlbnRpb24ge1xuICAgIE9uZURheSA9IDEsXG4gICAgVGhyZWVEYXlzID0gMyxcbiAgICBGaXZlRGF5cyA9IDUsXG4gICAgT25lV2VlayA9IDcsXG4gICAgVHdvV2Vla3MgPSAgMTQsXG4gICAgT25lTW9udGggPSAzMCxcbiAgICBUd29Nb250aHMgPSA2MCxcbiAgICBUaHJlZU1vbnRocyA9IDkwLFxuICAgIEZvdXJNb250aHMgPSAxMjAsXG4gICAgRml2ZU1vbnRocyA9IDE1MCxcbiAgICBIYWxmWWVhciA9IDE4MCxcbiAgICBPbmVZZWFyID0gMzY1LFxuICAgIEZvdXJIdW5kcmVkRGF5cyA9IDQwMCxcbiAgICBFaWdodGVlbk1vbnRocyA9IDU0NSxcbiAgICBUd29ZZWFycyA9IDczMSxcbiAgICBGaXZlWWVhcnMgPSAxODI3LFxuICAgIFRlblllYXJzID0gMzY1M1xufVxuLyoqXG4gKiBDbG91ZCB0cmFpbCBhbGxvd3MgeW91IHRvIGxvZyBldmVudHMgdGhhdCBoYXBwZW4gaW4geW91ciBBV1MgYWNjb3VudFxuICogRm9yIGV4YW1wbGU6XG4gKlxuICogaW1wb3J0IHsgQ2xvdWRUcmFpbCB9IGZyb20gJ0Bhd3MtY2RrL2VjMidcbiAqXG4gKiBjb25zdCBjbG91ZFRyYWlsID0gbmV3IENsb3VkVHJhaWwodGhpcywgJ015VHJhaWwnKTtcbiAqXG4gKi9cbmV4cG9ydCBjbGFzcyBDbG91ZFRyYWlsIGV4dGVuZHMgQ29uc3RydWN0IHtcblxuICAgIHB1YmxpYyByZWFkb25seSBjbG91ZFRyYWlsQXJuOiBjbG91ZHRyYWlsLlRyYWlsQXJuO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgY2xvdWRXYXRjaExvZ3NSb2xlQXJuPzogVG9rZW47XG4gICAgcHJpdmF0ZSByZWFkb25seSBjbG91ZFdhdGNoTG9nc0dyb3VwQXJuPzogVG9rZW47XG4gICAgcHJpdmF0ZSBldmVudFNlbGVjdG9yczogRXZlbnRTZWxlY3RvcltdID0gW107XG5cbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQ6IENvbnN0cnVjdCwgbmFtZTogc3RyaW5nLCBwcm9wczogQ2xvdWRUcmFpbFByb3BzID0ge30pIHtcbiAgICAgICAgc3VwZXIocGFyZW50LCBuYW1lKTtcblxuICAgICAgICBjb25zdCBzM2J1Y2tldCA9IG5ldyBCdWNrZXQodGhpcywgJ1MzJywge2VuY3J5cHRpb246IEJ1Y2tldEVuY3J5cHRpb24uVW5lbmNyeXB0ZWR9KTtcbiAgICAgICAgY29uc3QgY2xvdWRUcmFpbFByaW5jaXBhbCA9IFwiY2xvdWR0cmFpbC5hbWF6b25hd3MuY29tXCI7XG5cbiAgICAgICAgczNidWNrZXQuYWRkVG9SZXNvdXJjZVBvbGljeShuZXcgUG9saWN5U3RhdGVtZW50KClcbiAgICAgICAgICAgIC5hZGRSZXNvdXJjZShzM2J1Y2tldC5idWNrZXRBcm4pXG4gICAgICAgICAgICAuYWRkQWN0aW9ucygnczM6R2V0QnVja2V0QWNsJylcbiAgICAgICAgICAgIC5hZGRTZXJ2aWNlUHJpbmNpcGFsKGNsb3VkVHJhaWxQcmluY2lwYWwpKTtcblxuICAgICAgICBzM2J1Y2tldC5hZGRUb1Jlc291cmNlUG9saWN5KG5ldyBQb2xpY3lTdGF0ZW1lbnQoKVxuICAgICAgICAgICAgLmFkZFJlc291cmNlKHMzYnVja2V0LmFybkZvck9iamVjdHMobmV3IEZuQ29uY2F0KCcvQVdTTG9ncy8nLCBuZXcgQXdzQWNjb3VudElkKCkpKSlcbiAgICAgICAgICAgIC5hZGRBY3Rpb25zKFwiczM6UHV0T2JqZWN0XCIpXG4gICAgICAgICAgICAuYWRkU2VydmljZVByaW5jaXBhbChjbG91ZFRyYWlsUHJpbmNpcGFsKVxuICAgICAgICAgICAgLnNldENvbmRpdGlvbihcIlN0cmluZ0VxdWFsc1wiLCB7J3MzOngtYW16LWFjbCc6IFwiYnVja2V0LW93bmVyLWZ1bGwtY29udHJvbFwifSkpO1xuXG4gICAgICAgIGlmIChwcm9wcy5zZW5kVG9DbG91ZFdhdGNoTG9ncykge1xuICAgICAgICAgICAgY29uc3QgbG9nR3JvdXAgPSBuZXcgbG9ncy5Mb2dHcm91cFJlc291cmNlKHRoaXMsIFwiTG9nR3JvdXBcIiwge1xuICAgICAgICAgICAgICAgIHJldGVudGlvbkluRGF5czogcHJvcHMuY2xvdWRXYXRjaExvZ3NSZXRlbnRpb25UaW1lRGF5cyB8fCBMb2dSZXRlbnRpb24uT25lWWVhclxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmNsb3VkV2F0Y2hMb2dzR3JvdXBBcm4gPSBsb2dHcm91cC5yZWY7XG5cbiAgICAgICAgICAgIGNvbnN0IGxvZ3NSb2xlID0gbmV3IFJvbGUodGhpcywgJ0xvZ3NSb2xlJywge2Fzc3VtZWRCeTogbmV3IFNlcnZpY2VQcmluY2lwYWwoY2xvdWRUcmFpbFByaW5jaXBhbCkgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHN0cmVhbUFybiA9IG5ldyBGbkNvbmNhdCh0aGlzLmNsb3VkV2F0Y2hMb2dzR3JvdXBBcm4sIFwiOmxvZy1zdHJlYW06KlwiKTtcbiAgICAgICAgICAgIGxvZ3NSb2xlLmFkZFRvUG9saWN5KG5ldyBQb2xpY3lTdGF0ZW1lbnQoKVxuICAgICAgICAgICAgICAgIC5hZGRBY3Rpb25zKFwibG9nczpQdXRMb2dFdmVudHNcIiwgXCJsb2dzOkNyZWF0ZUxvZ1N0cmVhbVwiKVxuICAgICAgICAgICAgICAgIC5hZGRSZXNvdXJjZShzdHJlYW1Bcm4pKTtcbiAgICAgICAgICAgIHRoaXMuY2xvdWRXYXRjaExvZ3NSb2xlQXJuID0gbG9nc1JvbGUucm9sZUFybjtcblxuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wcy5tYW5hZ2VtZW50RXZlbnRzKSB7XG4gICAgICAgICAgICBjb25zdCBtYW5hZ2VtZW50RXZlbnQgPSAge1xuICAgICAgICAgICAgICAgIGluY2x1ZGVNYW5hZ2VtZW50RXZlbnRzOiB0cnVlLFxuICAgICAgICAgICAgICAgIHJlYWRXcml0ZVR5cGU6IHByb3BzLm1hbmFnZW1lbnRFdmVudHNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmV2ZW50U2VsZWN0b3JzLnB1c2gobWFuYWdlbWVudEV2ZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRPRE86IG5vdCBhbGwgcmVnaW9ucyBzdXBwb3J0IHZhbGlkYXRpb24uIFVzZSBzZXJ2aWNlIGNvbmZpZ3VyYXRpb24gZGF0YSB0byBmYWlsIGdyYWNlZnVsbHlcbiAgICAgICAgY29uc3QgdHJhaWwgPSBuZXcgY2xvdWR0cmFpbC5UcmFpbFJlc291cmNlKHRoaXMsICdSZXNvdXJjZScsIHtcbiAgICAgICAgICAgIGlzTG9nZ2luZzogdHJ1ZSxcbiAgICAgICAgICAgIGVuYWJsZUxvZ0ZpbGVWYWxpZGF0aW9uOiBwcm9wcy5lbmFibGVGaWxlVmFsaWRhdGlvbiA9PSBudWxsID8gdHJ1ZSA6IHByb3BzLmVuYWJsZUZpbGVWYWxpZGF0aW9uLFxuICAgICAgICAgICAgaXNNdWx0aVJlZ2lvblRyYWlsOiBwcm9wcy5pc011bHRpUmVnaW9uVHJhaWwgPT0gbnVsbCA/IHRydWUgOiBwcm9wcy5pc011bHRpUmVnaW9uVHJhaWwsXG4gICAgICAgICAgICBpbmNsdWRlR2xvYmFsU2VydmljZUV2ZW50czogcHJvcHMuaW5jbHVkZUdsb2JhbFNlcnZpY2VFdmVudHMgPT0gbnVsbCA/IHRydWUgOiBwcm9wcy5pbmNsdWRlR2xvYmFsU2VydmljZUV2ZW50cyxcbiAgICAgICAgICAgIHRyYWlsTmFtZTogcHJvcHMudHJhaWxOYW1lLFxuICAgICAgICAgICAga21zS2V5SWQ6ICBwcm9wcy5rbXNLZXkgJiYgcHJvcHMua21zS2V5LmtleUFybixcbiAgICAgICAgICAgIHMzQnVja2V0TmFtZTogczNidWNrZXQubmFtZSxcbiAgICAgICAgICAgIHMzS2V5UHJlZml4OiBwcm9wcy5zM0tleVByZWZpeCxcbiAgICAgICAgICAgIGNsb3VkV2F0Y2hMb2dzTG9nR3JvdXBBcm46IHRoaXMuY2xvdWRXYXRjaExvZ3NHcm91cEFybixcbiAgICAgICAgICAgIGNsb3VkV2F0Y2hMb2dzUm9sZUFybjogdGhpcy5jbG91ZFdhdGNoTG9nc1JvbGVBcm4sXG4gICAgICAgICAgICBzbnNUb3BpY05hbWU6IHByb3BzLnNuc1RvcGljLFxuICAgICAgICAgICAgZXZlbnRTZWxlY3RvcnM6IHRoaXMuZXZlbnRTZWxlY3RvcnNcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2xvdWRUcmFpbEFybiA9IHRyYWlsLnRyYWlsQXJuO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdoZW4gYW4gZXZlbnQgb2NjdXJzIGluIHlvdXIgYWNjb3VudCwgQ2xvdWRUcmFpbCBldmFsdWF0ZXMgd2hldGhlciB0aGUgZXZlbnQgbWF0Y2hlcyB0aGUgc2V0dGluZ3MgZm9yIHlvdXIgdHJhaWxzLlxuICAgICAqIE9ubHkgZXZlbnRzIHRoYXQgbWF0Y2ggeW91ciB0cmFpbCBzZXR0aW5ncyBhcmUgZGVsaXZlcmVkIHRvIHlvdXIgQW1hem9uIFMzIGJ1Y2tldCBhbmQgQW1hem9uIENsb3VkV2F0Y2ggTG9ncyBsb2cgZ3JvdXAuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBhZGRzIGFuIFMzIERhdGEgRXZlbnQgU2VsZWN0b3IgZm9yIGZpbHRlcmluZyBldmVudHMgdGhhdCBtYXRjaCBTMyBvcGVyYXRpb25zLlxuICAgICAqXG4gICAgICogRGF0YSBldmVudHM6IFRoZXNlIGV2ZW50cyBwcm92aWRlIGluc2lnaHQgaW50byB0aGUgcmVzb3VyY2Ugb3BlcmF0aW9ucyBwZXJmb3JtZWQgb24gb3Igd2l0aGluIGEgcmVzb3VyY2UuXG4gICAgICogVGhlc2UgYXJlIGFsc28ga25vd24gYXMgZGF0YSBwbGFuZSBvcGVyYXRpb25zLlxuICAgICAqIEBwYXJhbSByZWFkV3JpdGVUeXBlIHRoZSBjb25maWd1cmF0aW9uIHR5cGUgdG8gbG9nIGZvciB0aGlzIGRhdGEgZXZlbnRcbiAgICAgKiBFZywgUmVhZFdyaXRlVHlwZS5SZWFkT25seSB3aWxsIG9ubHkgbG9nIFwicmVhZFwiIGV2ZW50cyBmb3IgUzMgb2JqZWN0cyB0aGF0IG1hdGNoIGEgZmlsdGVyKVxuICAgICAqL1xuICAgIHB1YmxpYyBhZGRTM0V2ZW50U2VsZWN0b3IocHJlZml4ZXM6IHN0cmluZ1tdLCByZWFkV3JpdGVUeXBlOiBSZWFkV3JpdGVUeXBlKSB7XG4gICAgICAgIGlmIChwcmVmaXhlcy5sZW5ndGggPiAyNTApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkEgbWF4aW11bSBvZiAyNTAgZGF0YSBlbGVtZW50cyBjYW4gYmUgaW4gb25lIGV2ZW50IHNlbGVjdG9yXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV2ZW50U2VsZWN0b3JzLmxlbmd0aCA+IDUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkEgbWF4aW11bSBvZiA1IGV2ZW50IHNlbGVjdG9ycyBhcmUgc3VwcG9ydGVkIHBlciB0cmFpbC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ldmVudFNlbGVjdG9ycy5wdXNoKHtcbiAgICAgICAgICAgIGluY2x1ZGVNYW5hZ2VtZW50RXZlbnRzOiBmYWxzZSxcbiAgICAgICAgICAgIHJlYWRXcml0ZVR5cGUsXG4gICAgICAgICAgICBkYXRhUmVzb3VyY2VzOiBbe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwiQVdTOjpTMzo6T2JqZWN0XCIsXG4gICAgICAgICAgICAgICAgdmFsdWVzOiBwcmVmaXhlc1xuICAgICAgICAgICAgfV1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5pbnRlcmZhY2UgRXZlbnRTZWxlY3RvciB7XG4gICAgcmVhZG9ubHkgaW5jbHVkZU1hbmFnZW1lbnRFdmVudHM/OiBib29sZWFuO1xuICAgIHJlYWRvbmx5IHJlYWRXcml0ZVR5cGU/OiBSZWFkV3JpdGVUeXBlO1xuICAgIHJlYWRvbmx5IGRhdGFSZXNvdXJjZXM/OiBFdmVudFNlbGVjdG9yRGF0YVtdO1xufVxuXG5pbnRlcmZhY2UgRXZlbnRTZWxlY3RvckRhdGEge1xuICAgIHJlYWRvbmx5IHR5cGU6IHN0cmluZztcbiAgICByZWFkb25seSB2YWx1ZXM6IHN0cmluZ1tdO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC9yb290L3JlcG9zL2F3cy1jZGsvcGFja2FnZXMvQGF3cy1jZGsvY2xvdWR0cmFpbC9saWIvaW5kZXgudHMiLCJtb2R1bGUuZXhwb3J0cyA9IGpzaWkkX2F3c19jZGtfY29yZSQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJqc2lpJF9hd3NfY2RrX2NvcmUkXCJcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBqc2lpJF9hd3NfY2RrX2lhbSQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJqc2lpJF9hd3NfY2RrX2lhbSRcIlxuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IGpzaWkkX2F3c19jZGtfcmVzb3VyY2VzJDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImpzaWkkX2F3c19jZGtfcmVzb3VyY2VzJFwiXG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0ganNpaSRfYXdzX2Nka19zMyQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJqc2lpJF9hd3NfY2RrX3MzJFwiXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0="
}
